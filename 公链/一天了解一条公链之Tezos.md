**Tezos**

**项目介绍**

Tezos 项目起源于 2014 年，出发点为了解决频繁的 BTC 分叉问题，提出了一套可从程序最底层自行升级的系统，希望用链上治理来整顿 BTC 分叉闹剧。外加上智能合约，Tezos 变成了一个可自治理的智能合约平台，从此，Tezos 也被贴上了以太坊竞争对手的标签。但不得不说的是，Tezos 启用了新的智能合约语言，支持形式化验证，是新一代智能合约平台有力的竞争者。

Tezos 有多个特点，在定位白皮书（Position Paper）中也有比较清楚的描述，后多个特点升华出来，其中最为用户感知的就是以下 3 个：

**自治理**

自治理指的是 Tezos 可以通过提议，对基础的协议进行升级。该升级的可以修改到 Tezos 的最底层协议，满足时代变化所需。Tezos 不会像 BTC 一样无休止的分叉，所有大部分人同意的修改，都会得到执行，而少数人分叉注定是失败的。

为此 Tezos 提议设计了一套底层协议，来支持底层协议的升级，并配套了一套链上治理机制，用以为协议升级达成一致。两者配合，是目前我们能看到的，在区块链世界开始运用起来的一套链上治理方案了。

**形式化验证**

形式化验证的概念看起来不太好明白，维基百科给出的定义是：

在计算机硬件（特别是集成电路）和软件系统的设计过程中，形式验证的含义是根据某个或某些形式规范或属性，使用数学的方法证明其正确性或非正确性。

软件测试中，你很难测试出什么是对的，或者什么是错的，唯一能确定的是，你规定了某种情况/方式/方法是错的，然后以这种标准去做软件测试，形式化验证就是这样一种标准。这样的标准能有效帮助系统测试做出有效的判断。

这种标准对智能合约平台是极其有帮助的，因为涉及到 Token 的价值传播，代码编写就需要极其谨慎，形式化验证对常见的错误进行了规范并纠正，能有效减少代码的 bug 比率。

当然，不是所有的公有链或者智能合约平台都达到了这个要求，所以形式化验证是 Tezos 主推的一个特点。

**LPoS（Liquid Proof of Stake 流动性的权益证明机制）**

2012 年 PoS 共识被提出，后经历了两年左右的发展，Tezos 提出了自己的 PoS 共识，采用了单块抵押金，配合 Slash 的方式，解决 Nothing at stake 等重要的 PoS 问题。创新性的引入委托权益的证明，使得 Tezos 整个项目的去中心化程度变得较为突出。历经 4 年，2018 年上线主网，目前这套 PoS 系统成功代替了 BTC 的 PoW 共识，无消耗，无竞争，运行良好，也算是开启了 PoS 第二阶段的第一个项目里程碑（第一阶段是 PoS 在 2012~2014 年发展阶段）。

这 3 个特点的提出吸引了众多的投资人，2017 年进行 ICO 的 Tezos 获得了 2.3 亿美金的投资，成功成为 2017 年 ICO 募资之最，其中不乏大名鼎鼎的硅谷投资教父 Tim Draper。

Tezos 的发起人是 Authur B，最早是高盛的员工。和其他项目的创始人一样，都从迷恋比特币的白皮书开始进入区块链世界。面对 BTC 的分叉，ETH 的性能，PoW 的消耗性能，AB 提出了解决办法都应用到了 Tezos 上。

但是一直以来，Tezos 项目都相当低调，据 AB 说，低调的性格是秉承了法国人独有的调性。所以项目很早之前，开发团队基本不露脸，也不公开发展路线图，社区能得到的消息极少极少，也因此，曾经一度有投资者组成了维权群。

ICO 结束后，Tezos 经历了项目史上最严重的两次磨难，一个是基金会主席的中饱私囊，ICO 募资资金光发自己，不发开发者；另外一个是美国 SEC 法案将 Tezos ICO 列入调查的情况。两者相冲突，项目进展信息得不到，社区里一度认为这个项目已经黄掉了，但没想到后面 Tezos 奇迹的站了起来，由社区请愿罢免了基金会主席，也通过法律手段解决了 SEC 的问题。

经历了这两次磨难，Tezos 的社区变得更加健全，开发者，验证人都在稳步增加，新的基金会大方拨款成立开发者资助计划，目前来看，整个社区发展较为稳健，白皮书中列举的一些方案，都在有序进行当中，包括投票治理，扩容和隐私等，新的一年，还是值得期待的。

目前，Tezos 请了四大的会计事务所对 Tezos 的所有开销进行审计，并公开。从中可以了解到的是 Tezos 基金会目前还有约 5 亿美元的资金，可以支持项目的长期发展。长期发展是 Tezos 提出的一个重要理念，所以我们可以看到 Tezos 的开发周期基本是按月以上来排的，很多调整都较为仔细，并且和众多高校，科研机构达成了合作，资助了很多开发工具的团队，着重培养学生，准备好了来打区块链 5 年以上的” 战争”。

这种步调，像极了法国人处事的节奏。

**代币情况**

Tezos 的代币称号为 XTZ，符号为ꜩ，总量约 7.6 亿。其中 20% 留给基金会和团队，其余 80% 用于 ICO。Tezos ICO 采取不设硬顶的方式，XTZ 的总量和投资总额有一定的关系，最终投资额锁定在 2.3 亿美元，由此得出的 XTZ 总量。

XTZ 年增发约 5.5%，增发的奖励全部分发给 Tezos 的验证人。目前，超过 70% 的 XTZ 用于 Stake，Stake 可以抵消增发造成的稀释，在目前并没有太多应用的场景下，非稀释性通胀给系统带来的安全程度是很高的。

XTZ 的年增发不会长期停留在 5.5%，白皮书中有提到过增发率会无限趋近于 1%，减少增发率是一个线性过程，这有助于合理平衡系统。Tezos 认为，过于大的通货膨胀不利于系统发展。

**代币作用**

XTZ 的作用有两个，一个用于 Stake（Tezos 中把 Stake 叫做为烘焙），一个用户投票，链上治理。目前第一个功能已经实现，目前有超过 70% 总量的 XTZ 用于 Stake，第二个功能目前正在开发当中，预计于 2019 年 Q1 会有第一个提案出来。

Stake 的量如此高有两方面的原因，一方面是熊市，XTZ 的价格并没有达到预期，持有人 Stake 可以获得奖励，比单放着好很多；另外一方面是 XTZ 并没有太多使用场景，除了交易和 Stake 外，其他并无选择，所以 Stake 的量会比较高。

- 发展路线

Tezos 并没有很清晰的发展路线，Authur B 也在直播中表示过，Tezos 并不会有 Roadmap，因为他觉得 Tezos 是一个社区，社区的发展应该有所有开发者来决定，不应该有一个中心来决定 Tezos 的发展规划。

但从目前所得到的信息中看，Tezos 正在一步步执行白皮书中写到的一些规划，如链上治理的 Furtarchy，扩容的 zk-SNARKs，还有参考 Tendermint 要实现的 BFT 容错规划等。

之前 AB 在 2019 年临近的直播中，展望了一下 Tezos 的发展，其中包括 zk-SNARKs，内存优化等技术优化，更多开发工具，开发语言等。

- 设计哲学

Tezos 的设计哲学比较特别，不像 Cardano 的学术派，不像 Bitcoin 的放任派，Tezos 综合了比较多项目的优点，倾向于较重的去中心化，倾向于低调（Low Key）的行事，Tezos 从 2014 年开始，2018 年上线主网，前后经历 4 年，尽显法国人酿红酒的本性，主网上线后运行稳定，鲜有波动。

在去中心化上，Tezos 应该是非常开放的。在 Tezos 的设计中，成为验证人的门槛是持有 10000 个 XTZ，如果没有持有那么多，那么可以将权利委托给别人，间接获得验证的权利。这样委托权益的方案，对去中心化的程度有一定帮助。

另外，Tezos 没有像 EOS 或者 Cosmos 一样设置验证人上限，因为 Tezos 有 zk-SNARKs 的方案来做扩容，AB 在早期的 Medium 博客网站上，就曾撰写长文讲 zk-SNARKs 的扩容方案。目前 Tezos 的验证人数保持在 100+，全节点数量在 450+，对于一个 PoS 共识公有链来说，可以说是非常出色了。

最关键的是，后来者可以轻松的进入到验证环节，不需要花费巨大的精力和成本，就可以成为验证人。同样，已经参与验证的持币人也可以轻松退出验证环节。这种去中心化模式，让我更明白了去中心化的定义：

**任何共识当中，验证人可以轻松进入，也可以轻易离开，即是非常好的去中心化。**

除了去中心化，Tezos 创新性的将 PoS 共识进行了优化，制定出了非常清晰的，以区块为单位的抵押金和奖励机制，并结合了 Vitalik 的 Slash 规则来规范分叉和不诚实节点问题，这套逻辑到目前仍然是一种比较前沿的设计方案。

但是 Tezos 并非所有都是完美的，不知道是开发时间限制还是思想差异，Tezos 系统中很多模块都是需要在线下协调来完成了，比如委托 Stake 的奖励分发，比如委托抵押金的交付人是谁等，Tezos 充分发挥了市场的作用，让其得到解决。

这点和 Cosmos 是完全不一样的，同样的问题，Cosmos 将解决方法设计到了协议（Protocol）中，方便了和解决了众多去中心化的协调问题。

不过，这就是 Tezos 的设计哲学，遵循慢即是快，遵循区块链精神，虽然有表象上发展比较慢的诟病，但是这种差异化哲学让 Tezos 在西方世界收获了非常多的认同。ICO 地址有 3 万+个，在一开始，Tezos 就获得了比其他项目还要大的认同。

**LPoS**

Tezos 的共识是基于 PoS 的优化，社区人为了区别和其他 PoS 共识，命名为 LPoS（Liquid Proof of Stake）。按照以往对于 PoS 共识的命名来说，Tezos 的 PoS 也可以命名为 DPoS（Delegate Proof of Stake），因为在 Tezos 里面，持币人是可以将 XTZ 委托（Delegate）给验证人的，这和 BM 创建的 DPoS 的投票选举不同，XTZ 的委托是 Tezos 里面去中心化的一大特色。

既然是基于 PoS，LPoS 同样是建立在持币人权利上的机制，持币人通过 Stake 可以参与到 Tezos 的验证人系统当中，运行节点程序，验证人在被选中的高度进行出块（Bake）和验证（Endorsement），合理的行为会被奖励，作恶的行为会被扣除大部分抵押金。

Tezos 为了提高性能，采用了以 10000 个 XTZ 为一个卷（Roll）的出块人选举方案，同时，和 Cardano，以太坊一样，设置了选举周期（Cycle），一个周期大概是 4096 个块，2.8 个自然日，周期开始前，下个周期的验证人，出块人都会按照 Roll 的比例被选举出来。

抵押金缴纳则是发生在出块前或者验证前，出一个块交一次抵押金，验证一个块交一次抵押金，完成指定操作后，奖励会发送到你的验证人账户，但是是被锁定的状态。

单块抵押金的多少和单块奖励的多少是 Tezos 根据一个安全系数算出来的，目前出块奖励为 16XTZ，验证奖励为 2XTZ，出块抵押金为 512XTZ，验证抵押金为 64XTZ。总体算下来，抵押金的安全比例为 8.25%。

所以 LPoS 是以**小单位：区块，大单位：周期**形成的一种选举人共识。

另外，没有能力，时间，或者是技术的持币人，可以将 XTZ 委托给验证人，委托过程不存在转币，委托只是一层系统认定的权利转移关系。同时，系统锁定了抵押金，但并没有锁定委托的 XTZ 数量，委托人在委托期间可以任意转移自己委托的 XTZ。

这也是 LPoS 中，L（Liquid 流动）的由来了。

锁定的抵押金，目前 Tezos 市场上出现了验证人帮助委托人交抵押金的情况，委托人委托并不会担任自己本金丢失的风险，但有不诚实验证人不给于奖励的风险，这相对于丢失本金的风险要小的多。市场上超过 50% 以上的 XTZ 是通过委托来参与验证的，这个数量足以看出委托体系建立，对于 Tezos 的帮助了。

整体来说，LPoS 解决了 PoS 中，参与 Stake 动力不足的问题，满足了 PoS 系统中需要越多币参与 Stake 越安全的要求，通过非稀释性通胀吸引用户参与 Stake，是一种创新。另外，LPoS 的选举效率和选举安全都是可以得到保证的，目前，Tezos 使用的 Follow the Satoshi 选举算法和 Cardano 选举算法大致是一样的，后者有数学严谨的证明其是安全的，可靠的，无偏差的。

**性能**

Tezos 的性能并不算出众，目前大概只有 40TPS 左右。但目前尴尬的是，几乎每个块都还填不满数据，所以对于 Tezos 来说，提高性能并不是当前的要务。

去中心化和性能这两个不可兼得，Tezos 的设计哲学是先冲着去中心化去的，因为觉得去中心化是不可逆的，而性能是可以不断提高的。所以我们可以看到前期 Tezos 花了很多时间在设计整套去中心化架构，从参与验证，到委托权益，这些功能在一定程度上降低了系统的处理能力。

我很期待 zk-SNARKs 给 Tezos 带来的性能提升，因为从 ZCash 的 sapling2.0 来看，优化后的 zk-SNARKs 给 ZCash 带来了指数级别的提升。

**运行**

运行 Tezos 的节点程序比较简单，需要搭建所需环境，并按照官方指导步骤搭建即可。搭建节点的教程比较多，这里贴一个比较完整的节点搭建方案：https://github.com/tezoscommunity/FAQ/blob/master/Compile\_Mainnet.md。

另外，节点搭建完成后，还需要注册才能成为验证人。记得，成为验证人需要 1 万个 XTZ，只有注册成功的验证人才能获得被选举的权利。

目前 Tezos 的节点程序更新并不算频繁，但是只要是更新一般都需要节点一起来更新，来保证整个网络运行稳定。节点验证人会有一个地方进行交流：https://tezos-baking.slack.com/messages/CC4FD2HUY/。

Tezos 并不会要求节点 24 小时在线，被选举的验证在指定时间没有在线，则会有次优先级的人来替代出块，所以不在线不会成为 Slash 的条件，不在线只会让验证人丢失本就属于自己的奖励。但是，节点升级尽可能的还是选择没有出块或者验证的时间段来停机升级，避免不必要的损失。

**出块人**

Tezos 上的出块人，也称作为验证人，验证人有四个职责：

- 出块：指生成新区块链，打包交易到区块并广播
- 验证：验证新的区块和交易，并签名
- 披露：将当前周期的随机种子在下一个周期开始前广播
- 谴责：如果发现不诚实行为，可以发表谴责声明到区块链中（可选）

其中，4 个行为中，除了披露外，都可以得到系统的奖励，其中，以验证的奖励最多。持币人通过运行节点程序，并注册，即可成为验证人。

**持币人**

持币人在 Tezos 系统中，有三个权利：

- 投票
- 注册成为验证人
- 委托权利：可以将 XTZ 的 Stake 权益委托给其他验证人

目前投票的进程才开始初步试水，已有在社交媒体上发起讨论了。但是真正的投票还在调试当中，预计第一次投票会在 2019 年 Q1 开展。

**激励**

Tezos 年增发 5.5%，按照 7.6 亿的总量来算，每年有 4 千万 XTZ 会被增发出来，按照 3 人民币一个 XTZ 的价格来算，每年增发的 XTZ 价值 1.2 亿。

Tezos 上的激励行为有以下 3 种

- 出块：一个区块奖励 16 个 XTZ
- 验证：一个区块奖励 2 个 XTZ
- 谴责：被证实后，没收的抵押金少部分奖励给发表谴责的人

举个例子，按 500 万个 XTZ 计算，一个周期大概能获得 40 个出块机会，1400 个验证机会。有足够多的抵押金情况下，可以获得奖励=40×16+1400×2=3440 个 XTZ。

如果 500 万个 XTZ 中有 80% 是用户委托了，验证人设置的委托手续费为 10%，那么验证人可以获得的总奖励=3440x（1-80%）+3440×80%x10%=688+275=964 个 XTZ

一个周期大概 2.8 天，那么一个月下来，接受委托的验证人大概可以获得 9640 个左右的 XTZ。

**惩罚**

Tezos 的惩罚 Slash 和其他的 PoS 公有链差不多，基本是针对分叉和不诚实节点做出的限定，主要有以下几个惩罚行为：

- 双块：在同一区块高度生成两个新的区块
- 双签：在同一区块高度在两个不同链上上的区块签名
- 披露：在周期结束时，不披露随机 Nonce

Tezos 对不诚实行为的惩罚是非常严厉的。按照周期为范围，如果周期内发生一次，那么周期内的抵押金会被全部扣除。就按照 500 万个 XTZ 来计算，40 个出块机会，1400 个验证机会，总共要交的抵押金=40×512+1400×64=130560，这个抵押金要是被扣除了，那可得不偿失了。

所以验证人作恶的成本是很高的，一般情况下，不会去作恶。但是由于系统初期，并不是所有验证人都能清楚的知道什么行为会被 Slash，或者是知道了 Slash 的行为但不知道怎么去规避，亦或者是误操作，导致的 Slash 情况也很多。

**治理**

Tezos 是非常强调链上治理的，最开始讲 Tezos 的一个重要特点就是自治理，自治理需要配套一套链上提议-投票的系统来一起维护。

![](Aspose.Words.19408213-671f-4f6e-b518-21869d5e4fec.001.jpeg)

目前，开发团队的投票系统针对的是 Tezos 底层的协议升级，也就是自治理部分，分为 4 个阶段，每个阶段都是以周期计算（Tezos 中的周期为 Cycle，一个 Cycle4096 个块）

- **提议周期**：第一阶段持续 1~8 个周期。这个可以理解为广泛收集议题的周期。有验证人提交提案，所有验证人给提议投票，每个验证人只能投 20 个提案，取票数最高的那个提案进入下一个周期
- **探索投票周期**：第二阶段持续 9~16 周期。此周期内，所有验证人对第一阶段投票最高的提案进行二次投票，确定是否同意执行。如果此周期的投票人数超过绝多数（80%），并且投票人数中投通过的大于投否定的票数，那么该提案进入下一个周期
- **测试周期**：第三阶段持续 17~24 周期，该周期会从主链分叉出一条测试链，用于测试该提案，持续 48 小时。另外，一个链下的测试网可以用于评估提案。
- **推进周期**：第四阶段持续 25~32 周期，测试周期结束后，验证需要再次对提案进行投票，以决定是否要将提案应用到主网。同样，如果此周期的投票人数超过绝多数（80%），并且投票人数中投通过的大于投否定的票数，那么该提案所在的测试网将被认成为主网。

一个底层协议的升级一共经历 32 个周期（90 天），3 次投票，其中还要经过足够长时间测试才能确定是否上主网，看上去升级元协议并非易事。

另外，验证人并挑选出来作为权力代表，代表委托权益人进行投票，这点很 EOS 有点像，只是委托人可选择的范围不受 21 个的数量限制。有一些权力代表初期会收集委托用户的投票意向，但是这种意向收集往往费时费力，并不能确定在没有激励的情况下，投票的参与率和收集率的情况。而且一次投票的时间间隔比较长，很像是大国治理，达成共识的难度较高，这有点偏离了以往我们对于互联网产品更新迭代速度快的印象。

第一次的链上提案已经发出，在社交平台上已经有了讨论，主要议题有两个

- 减少 Roll 的数量
- 提高 Gas Limit

这次提案还没有提交到链上走投票流程，预计 2019 年 Q1 会正在上链进行投票。Tezos 的链上治理还是比较复杂的，不像其他公链，仅仅是一个提案上链投票，然后选择团队执行的的过程，而是将上链投票和执行都自动化到流程中了，所有过程和利弊都可以在链上看到，避免了提案本身描述的天花乱坠，但线上崩溃的一塌糊涂的境地。

这也就是 Tezos 被称之为一个可自治理的区块链的由来了。

**问题**

Tezos 项目自 2014 年~2017 年发展的都还挺顺利，ICO 后到时出现了一大堆问题，特别是法律法规问题，Tezos 更是聘请了财务，法律团队来避免一些不必要的踩坑，目前来看，Tezos 的审计开放程度是比较公开的。尽管做到如此的小心谨慎，项目还是不可避免的存在这样那样的问题：

- SEC 问题

美国证券交易所的决定，会影响 XTZ 的价格走向，如果 SEC 把 XTZ 列为证券，那么它极有可能会被合规交易所下架交易对，这对 Tezos 来说是比较严重的打击。目前，将 XTZ 列为证券的讨论还存在。

- 基金会法律问题

基金会的法律问题一直以来都没有停止过，大到基金会主席的不作为，小到投资人的维权诉讼，这些干扰因素一直在困扰着基金会。虽然 2018 年，基金会重组，甚至出现了一个由草根组织形成的基金会，整体向好，但是仍然有很多法律问题时不时会出现。

- 开发慢问题

Tezos 的开发团队主要是在法国，法国的生活节奏，工作节奏都比较慢，所以 Tezos 的项目开发也是比较慢，这会被众多投资者诟病，特别是来自中国的投资者。

**未来**

Tezos 的未来是想成为一个能自治理的智能合约平台，因为其新的智能合约语言 OCAML 的关系，它极有可能在金融领域突出重围。也因为这个原因，Tezos 准备好了区块链发展 5~10 年的准备，重金投资了很多科研机构，教育机构，培养新的开发者在 Tezos 上写智能合约，做应用。

但是，Tezos 想大成可不简单，Tezos 面临的竞争也很多，这本书中讲到的一些例子（Cardano，Dfinity，Ethereum 等）都是它的竞争对手，而且对手的团队，融资额，市场操作并不会比 Tezos 差，所以，都想成为新一代智能合约开发平台的心，会引起非常惨烈的竞争，而最终胜出的极有可能是小部分，亦或是在各自在各自的领域存活，并获得生机。

Tezos 有自己的优点，也在打自己的差异化，很多项目并没有 5~10 年的发展计划，所以在长远（Long Run）来看，Tezos 应该会有属于自己的一席之地，尽管现在的生态发展很糟糕。
